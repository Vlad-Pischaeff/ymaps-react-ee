(this["webpackJsonpymaps-react2"]=this["webpackJsonpymaps-react2"]||[]).push([[0],{22:function(e,t,n){},26:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(14),i=n.n(r),o=(n(22),n(3)),s=n(6),u=n.n(s),l=n(5),d=n(10),f=n(2),b=function(){var e=Object(a.useState)(""),t=Object(f.a)(e,2),n=t[0],c=t[1];return{value:n,onChange:Object(a.useCallback)((function(e){return c(e.target.value)}),[]),onFocus:Object(a.useCallback)((function(){return c("")}),[])}},g=Object(a.createContext)(),h=function(){return Object(a.useContext)(g)},j=n(15),v=n(16),p=n(17),m=new WeakMap;function O(e){return m.has(e)||m.set(e,{}),m.get(e)}var x={},A=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:console;Object(v.a)(this,e);var a=O(this);return a._events=new Set,a._console=n,a._maxListeners=null===t?null:parseInt(t,10),this}return Object(p.a)(e,[{key:"_addCallback",value:function(e,t,n,a){return this._getCallbacks(e).push({callback:t,context:n,weight:a}),this._getCallbacks(e).sort((function(e,t){return t.weight-e.weight})),this}},{key:"_getCallbacks",value:function(e){return x[e]}},{key:"_getCallbackIndex",value:function(e,t){return this._has(e)?this._getCallbacks(e).findIndex((function(e){return e.callback===t})):-1}},{key:"_achieveMaxListener",value:function(e){return null!==O(this)._maxListeners&&O(this)._maxListeners<=this.listenersNumber(e)}},{key:"_callbackIsExists",value:function(e,t,n){var a=this._getCallbackIndex(e,t),c=-1!==a?this._getCallbacks(e)[a]:void 0;return-1!==a&&c&&c.context===n}},{key:"_has",value:function(e){return O(this)._events.has(e)}},{key:"on",value:function(e,t){var n=O(this);if("function"!==typeof t)throw new TypeError("".concat(t," is not a function"));return this._has(e)?(this._achieveMaxListener(e)&&n._console.warn("Max listeners (".concat(n._maxListeners,")")+' for event "'.concat(e,'" is reached!')),this._callbackIsExists.apply(this,arguments)&&n._console.warn('Event "'.concat(e,'"')+" already has the callback ".concat(t,"."))):(n._events.add(e),x[e]=[]),this._addCallback.apply(this,arguments),this}},{key:"once",value:function(e,t){var n=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=function c(){n.off(e,c);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t.call(a,i)};return this.on(e,r,a,c)}},{key:"off",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=O(this);return this._has(e)&&(null===n?(a._events.delete(e),x[e]=null):-1!==(t=this._getCallbackIndex(e,n))&&(this._getCallbacks(e).splice(t,1),this.off.apply(this,arguments))),this}},{key:"emit",value:function(e){var t=x[e],n=Object.values(arguments),a=Object(j.a)(n),c=a.slice(1);return t.forEach((function(e){return e.callback.apply(e.context,c)})),this}},{key:"clear",value:function(){return O(this)._events.clear(),x={},this}},{key:"listenersNumber",value:function(e){return this._has(e)?x[e].length:null}}]),e}(),E=new A,k=Object(a.createContext)(),y=function(){return Object(a.useContext)(k)},I=n(1);function B(){var e=y(),t=e.EE,n=e.placing,a=h().myMap,c=b(),r=b(),i=b();function s(e,t,n){this.city=e.value,this.street=t.value,this.building=n.value}var f=function(e){var t=e.city+" "+e.street+" "+e.building;return a.map.geocode(t.toLowerCase()).then((function(e){var t;return(null===e||void 0===e||null===(t=e.geoObjects)||void 0===t?void 0:t.get(0))?e.geoObjects.get(0).geometry.getCoordinates():[52.96,63.13]}))},g=function(){var e=Object(d.a)(u.a.mark((function e(a){var o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),!(c.value&&r.value&&i.value)){e.next=10;break}return o=new s(c,r,i),e.next=5,f(o);case 5:o.coord=e.sent,t.emit("set",[].concat(Object(l.a)(n),[o])),i.onFocus(),r.onFocus(),c.onFocus();case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(I.jsxs)("form",{onSubmit:g,onReset:function(){return t.emit("reset")},children:[Object(I.jsx)("input",Object(o.a)(Object(o.a)({type:"text",name:"city"},c),{},{required:!0,placeholder:"city name..."})),Object(I.jsx)("input",Object(o.a)(Object(o.a)({type:"text",name:"street"},r),{},{required:!0,placeholder:"street name..."})),Object(I.jsx)("input",Object(o.a)(Object(o.a)({type:"text",name:"building"},i),{},{required:!0,placeholder:"building number..."})),Object(I.jsxs)("fieldset",{className:"buttons",children:[Object(I.jsx)("input",{type:"submit",value:"OK"}),Object(I.jsx)("input",{type:"reset",value:"Reset"})]})]})}var w=n(8),C=n.p+"static/media/myIcon2.55d63feb.svg";function D(){var e=y(),t=e.EE,n=e.placing,c=h(),r=c.myMap,i=c.setMyMap,s=n.map((function(e){return e.coord})),f={modules:["geoObject.addon.hint","geoObject.addon.balloon"],options:{iconLayout:"default#image",iconImageHref:C,iconImageSize:[20,20],iconImageOffset:[-10,-10],draggable:!0,openBalloonOnClick:!0,openEmptyBalloon:!0,hideIconOnBalloonOpen:!1}},b=function(){var e=Object(d.a)(u.a.mark((function e(a,c){var r,i,o,s,d,f;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={},i=a.originalEvent.target.geometry._coordinates,o=Object(l.a)(n),e.next=5,g(i);case 5:(s=e.sent)&&(d=s.split(","),f=d.length-1,r.building=d[f],r.street=d[f-1],r.city=d[f-2]),r.coord=i,o[c]=r,t.emit("set",o);case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),g=function(e){return r.map.geocode(e,{kind:"house",results:5}).then((function(e){var t=e.geoObjects.get(0);return t?t.getAddressLine():null}))},j=n.map((function(e,t){return Object(a.createElement)(w.b,Object(o.a)(Object(o.a)({},f),{},{key:"placemark-".concat(t),geometry:e.coord,onDragend:function(e){return b(e,t)},properties:{balloonContent:"".concat(n[t].city," ,").concat(n[t].street," ,").concat(n[t].building)}}))}));return Object(I.jsx)(w.d,{query:{lang:"ru_RU",apikey:"cf1b8beb-bb0c-4563-9d28-c603002dd2ad"},children:Object(I.jsxs)(w.a,{className:"map",defaultState:{center:[52.96,63.13],zoom:7},onLoad:function(e){return i({map:e})},modules:["geocode"],children:[Object(I.jsx)(w.c,{geometry:s,options:{balloonCloseButton:!1,strokeColor:"#03a",strokeWidth:4,strokeOpacity:.5}}),j]})})}var F=n.p+"static/media/icons8-close.e302745f.svg";function M(e){var t=e.params,n=y().EE,c=t.addr,r=t.idx,i=t.img,o=t.setDroppedItemIdx,s=t.setDraggedItemIdx,u=t.draggedItemIdx,l=Object(a.useState)({}),d=Object(f.a)(l,2),b=d[0],g=d[1],h=Object(a.useState)(!1),j=Object(f.a)(h,2),v=j[0],p=j[1];return Object(I.jsxs)("li",{className:"addr-wrap",draggable:"true",style:b,onDragStart:function(e){s(r),g({opacity:"0.5"}),e.dataTransfer.setDragImage(i,20,20)},onDragLeave:function(){u!==r&&(g({}),p(!1),o())},onDragOver:function(e){e.preventDefault(),u===r||v||(p(!0),g({background:"pink",transform:"scale(1.02)"}))},onDragEnd:function(){s(),o(),g({})},onDrop:function(){g({}),p(!1),o(r)},children:[Object(I.jsxs)("section",{className:"left-section",children:[Object(I.jsx)("div",{children:c.city}),Object(I.jsxs)("div",{children:[c.street,", ",c.building]}),Object(I.jsxs)("p",{style:{color:"#666",fontSize:".8rem"},children:["[",c.coord[0],", ",c.coord[1],"]"]})]}),Object(I.jsx)("section",{className:"right-section",children:Object(I.jsx)("img",{src:F,alt:"iconClose",className:"icon-close",onClick:function(){return n.emit("remove item",r)}})})]})}function Q(){var e=y(),t=e.EE,n=e.placing,c=Object(a.useState)(),r=Object(f.a)(c,2),i=r[0],o=r[1],s=Object(a.useState)(),u=Object(f.a)(s,2),l=u[0],d=u[1],b=new Image;return b.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAABmJLR0QA/wD/AP+gvaeTAAAI10lEQVRoge3ZW2wc1RkH8P83M3vzeh2vHWMnjk1SQnAIUWhDCOk15VKRQKuCKBUhLdDSvqSoAvFQqa3qXpB4qVAKVEBDAAVK0qolVaW0UasgKKQlCSKEJrRRAk527dhe33Z39jIzZ76vD/ba3p1ZrzekT2Qka2T7rM/vP+c754xngIvHxePjfdAF+Su/Ex0xda1G+CK5vLaBZNWdHcbyJoN0lwWWAhccsTOOpHI2HysoteeNf0VfQi/xsQ1YLWTcD/ANIrRUQBCgj0F/F6Id6w7a//7/BdgvXZqutsHFVrB0EgvAgiiAG9t0dIQIQRCYAWGARcAMuMrF+2eS5j1/uPf0tYMHVwugiQBTePDUWUAuIE9FM85Dq47DvnABXpc2zeZfiMi9xBIEC0p4YgFk8rwhbuDqJqMCz3AmhnHzc3dg5bnDk1B//PTPmXBgQcba5BdCqxt/QLaQw/8Rke/OhQcLTJvL8MyAXcjj83/+wfzxk22uH49FfunHmf8IHJEA0vzrtgDuXxoCGjVBiIC0JUjkBIMFtwxPLOhp1PG5hcFpvKtcRE++gfueuxkkPD/8zM9cYmPNZw+bx2ezjPnY2/dL9DKSN9d10Zq4PolhmTo3EHgBcNIkvJZyYKqZEJcEaRrPDDiOjc5/7vLgJRBC4Bs/RtfmuwARnN23G4Vdj0Ace3Yg3dXdbwN4qK4AGz+U8HJbTncH0T6NmVUSpTCfiGhoXxTEHxMW0opBzIgH9Ok2lis4eGYCtyXf9Fz5wNYfoeebD073ufKeB3ECQG5nb3lQ0E2VvpoBlhTk7e6IFz9qCfYOKGRsxtII4ZKghgUaIQiAplLJ1GfGii7eOJdDNp3HJblBT9l03bLF0++lt27B8Wd7y9uKXFpXgFvfk+0rInJlJT5tC3YnFHKKQSw4lWGcZjVV+5N4EkHCtJEQ4PhIEexOhfKpeYh4+haXfdpqnoZVV6Gb3pHLr4rwA35ls39oBl++Cs3gwYJjI0UcSxWm8UQaBhvaPRP27L7dnv779r3sN7kT8x6BtoC8EiaiSnyqKOjLzeANEWxoCWBZo45+08WhVBF52y+cAHoQh1rXozvbV7baFHY9ghMAujffBQA4s+9l5HY96gnKwP5Kp+8yetN7cs11ETlM4p2wfXnBK0kLYEFcJ9zQFkTLrNVmwnLxl7MmnMoREgEphe6Bw9j5+hYQs99SWXVZZSFWGlZvfss8UbOEWsR93A/PAnQECZ0hDWuadNy+OFSGZwYaDR0rYiH/zQ0aEvFV+FPnbXXhBcBb3V8ersT7Btj4qhiLg7TOD88MaAJ8pSOIDfEgdIJvm5aQ7rszEwtghPH0qofxTvzqeeNPta3D3usebUPvq56S9wQINbn3RTXofrDSV+Xtwew2LgOnxgv+eBaQEFQ4jp+v247THetr4j9Y+Em88IVngGibvty48q6aARqBO84Xb9qMfyQzGMra/vjSmTQYzZ347abn8UHHdXPin9u4E07jEgh06Jp+d80AUY2uqhdvWoyjqQL+2jeBYbMGXgQtDSEs72iDG1uEF7+0E6fa19fECwOaoV9Z6fXUVESTVmaqiXdcwcHBApJZe3LTqVbzFXiwoLtlAQxNmyy52CLsunEntv7tW1g6dLgqfnINMNpqBggRgvO58u+OWjiTsareSlfDGyAEtJl7JCEdbmwRXrh+B7722vfhCmHPZx6D09hZhufJBMGaAXRMbV41yiaRsevGEwtaYhFAqKxEBRrcxsXYtXEHXBFQqNmDZwYA8pS8J8CYxRI3NJqN/2/aQZgIIU1DzJjsPGepuvFgQVssVjG/ZCqEDoo0Q2OARfPgS5+pGeBgSpmb2oOxEv79CQcHhwrTiKXRAFY2h+uq+dL38UgY4UDAg58OJBpYUBXvKuFKr2dIzpjq7DujznTZJE2nDDGSV8haXDdeB6GztaU6vqxkq/zeUfP4n1jk5KGRIo6M2GAGPhUP45YlMTQbGogFeUvh2JBZF55Y0NEcg2Ho549nQFl2qnYAxUfAgndHi3j1XB4agCZDw+qWSGmcYdqqLjxYEA4EPxKeGRDFnmdE3lVI3AMiBLAgkbHRn7bQHjJwWSyMNa0NOGdaAGM6jOsKsnkbPAeeWGA7CpHQ+eOZAbKKL1d6vbfTvaKFl431EUtXJeKq1iiWNoXLOhEGbMXoG8mifyzrPzIiMEhDa3MzdNKglAtWDCMQQDAcnbwzrYF3HVslV8XCuJPcuUuol5hYXvJDfDie9+CZAQ2E7ngMASJfPLHAdRRSQykMDgxidHAY48MpjCT7MdafrIlnEUguf6gS7x8AABQ9Scx2JUIp9uBnbTJY0d6KBsPw4KvNFWKBlTXhFK058ewykM5s86P6Bih8pzUJwU4/hB++1HFDKISerkW4onsxFi2MIzQ7jA9+en7kC9XxDIiZPdb/mxVH5x0AAAzN/iFERsonogunNAoV+NklEDQCiDc1ob21tSYeLHDz+ap4dhQrK3V7NWfVAJn7u8aI+YHKK3huojAnvqysKudElZJSZs4fzwBl048NP776dN0BAMD8XuduYnl6doeJsSyUKzXxzEAhV6yJBwvEKsItFLz4zPjRge1LHp7LWPPpdHZx5zaNZW8JYdkKI9liTTwLkEtna+JLe4caHy/Di5kdGhi3NtTy1X68fie5UdO4m0T2lToez+Zr4jPpLKx8YV54YoGY6Rl8zhwMj+Z68Pyy4kcPAGCgd3E+3TzyVTA/BRZkSiPgg3dZMDKYwmj/uXnjwQIqFsFFC5ROHx0cMZf1Pb9sYj62ut/QtPz01NeF5YlVy5Ys1Egvv/IMDA8MIpfO1IefPKcQjf8s+ezKJ+rx1P2GZuwny/coW/VkzOIR1+WyshkfHTsfvAWWJ+Cip1488BFf8vVsT601XP1XoXBovVV09OFEEuAqz0Ur8SIJTeFFUfxk8vef7j9fw4V5zdorRnv+/WvYUhuJZS2xXEEsnWBpnMKbJJIUl0/qgiPk0oHE5eveRi/xBen/4nHx+Bgf/wMz2DMk1h/LnQAAAABJRU5ErkJggg==",Object(a.useEffect)((function(){void 0!==i&&void 0!==l&&t.emit("reorder items",{draggedItemIdx:i,droppedItemIdx:l})}),[i,l]),Object(I.jsx)("ul",{className:"route-wrap",children:n.map((function(e,t){return Object(I.jsx)(M,{params:{addr:e,idx:t,img:b,setDraggedItemIdx:o,setDroppedItemIdx:d,draggedItemIdx:i}},t)}))})}var P=function(){var e=function(){var e=Object(a.useState)({}),t=Object(f.a)(e,2),n=t[0],c=t[1];return Object(a.useMemo)((function(){return{myMap:n,setMyMap:c}}),[n])}(),t=function(){var e=Object(a.useState)([]),t=Object(f.a)(e,2),n=t[0],c=t[1],r=Object(a.useRef)(n);return Object(a.useEffect)((function(){r.current=n})),Object(a.useEffect)((function(){return E.on("set",(function(e){return c(e)})),E.on("reset",(function(){return c([])})),E.on("remove item",(function(e){var t=r.current.filter((function(t,n){return n!==e}));c(t)})),E.on("reorder items",(function(e){var t=Object.values(e),n=Object(l.a)(r.current),a=n.splice(t[0],1);n.splice(t[1],0,a[0]),c(n)})),function(){E.off("add"),E.off("reset"),E.off("remove item"),E.off("reorder items")}}),[]),n}();return Object(I.jsx)(g.Provider,{value:e,children:Object(I.jsx)(k.Provider,{value:{EE:E,placing:t},children:Object(I.jsxs)("div",{className:"App",children:[Object(I.jsxs)("aside",{className:"left-aside",children:[Object(I.jsx)(B,{}),Object(I.jsx)(Q,{})]}),Object(I.jsx)("main",{className:"main",children:Object(I.jsx)(D,{})})]})})})},J=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,27)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),a(e),c(e),r(e),i(e)}))};i.a.render(Object(I.jsx)(c.a.StrictMode,{children:Object(I.jsx)(P,{})}),document.getElementById("root")),J()}},[[26,1,2]]]);
//# sourceMappingURL=main.611ea47e.chunk.js.map